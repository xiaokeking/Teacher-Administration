define(["jquery","template","nprogress","jquery_cookie"],function(e,o,t){e(function(){if(t.start(),setTimeout(function(){t.done()},500),e(document).ajaxStart(function(){e(".mask").fadeIn()}),e(document).ajaxStop(function(){setTimeout(function(){e(".mask").fadeOut()},400)}),"/login"!==location.pathname){if(e.cookie("PHPSESSID")){var a=e.cookie("userinfo");a=JSON.parse(a);var n=o("userinfo-tpl",a);e("#userinfo").html(n)}else location.href="/login";e("#logout").click(function(){e.ajax({type:"post",url:"/api/logout",success:function(o){200==o.code&&(e.removeCookie("userinfo",{path:"/"}),location.href="/login")}})});var i=location.pathname;i={"/teacher/add":"/teacher/list","/settings":"/","/repass":"/","/category/add":"/category/list","/course/step1":"/course/add","/course/step2":"/course/add","/course/step3":"/course/add"}[i]||i,e(".navs a").each(function(){var o=e(this);o.removeClass("active"),o.attr("href")==i&&o.addClass("active")}),e(".two_menu").click(function(){e(this).children("ul").slideToggle()}),e(".two_menu").find(".active").parent().parent().show()}})});